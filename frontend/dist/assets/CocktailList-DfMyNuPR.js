import{R as Ze,T as es,j as e,P as ss,C as xe,c as S,a as ts,b as as,d as he,O as ge,D as pe,B as k,I as R,e as fe,f as je,g as be,h as ve,L as D,i as rs,u as ns,k as we,l as ls,t as L,m as is,n as os,o as cs,p as ds,q as ms,r as us,s as ne,v as le,A as xs,w as hs}from"./index-Dzd8rIx9.js";import{r as n}from"./react-BiOD6Bo6.js";import{C as I,S as y,B as F,I as K,a as X}from"./ImageWithFallback-BtcMmNS2.js";import{X as ye,S as W,c as ie,d as Ne,W as Z,H as Se,e as gs,f as M,g as ps,D as fs,h as js,i as bs,j as vs,E as ws,k as ys,a as Ns}from"./ui-CR49N7Ia.js";import{a as Ss,S as Cs,s as Q}from"./Seo-986Xj8qT.js";const _s=Ze,ks=es,Es=ss,Ce=n.forwardRef(({className:s,...t},a)=>e.jsx(ge,{className:S("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t,ref:a}));Ce.displayName=ge.displayName;const Ts=as("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),_e=n.forwardRef(({side:s="right",className:t,children:a,...l},r)=>e.jsxs(Es,{children:[e.jsx(Ce,{}),e.jsxs(xe,{ref:r,className:S(Ts({side:s}),t),...l,children:[e.jsxs(ts,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[e.jsx(ye,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]}),a]})]}));_e.displayName=xe.displayName;const ke=({className:s,...t})=>e.jsx("div",{className:S("flex flex-col space-y-2 text-center sm:text-left",s),...t});ke.displayName="SheetHeader";const Ee=n.forwardRef(({className:s,...t},a)=>e.jsx(he,{ref:a,className:S("text-lg font-semibold text-foreground",s),...t}));Ee.displayName=he.displayName;const Ds=n.forwardRef(({className:s,...t},a)=>e.jsx(pe,{ref:a,className:S("text-sm text-muted-foreground",s),...t}));Ds.displayName=pe.displayName;const Fs="https://todays-cocktails.onrender.com",Ls={light:"bg-green-100 text-green-800 border-green-200",medium:"bg-yellow-100 text-yellow-800 border-yellow-200",strong:"bg-red-100 text-red-800 border-red-200"};function Rs({onViewDetails:s}){const[t,a]=n.useState(null),[l,r]=n.useState(null),[o,c]=n.useState(!0);n.useEffect(()=>{(async()=>{try{const b=`todays_pick_${new Date().toISOString().split("T")[0]}`,x=sessionStorage.getItem(b);if(x)try{a(JSON.parse(x)),c(!1);return}catch{sessionStorage.removeItem(b)}const d=await fetch(`${Fs}/api/v1/cocktails/todays_pick`);if(!d.ok)throw new Error("Failed to fetch today's pick");const m=await d.json();a(m),sessionStorage.setItem(b,JSON.stringify(m))}catch(f){r(f instanceof Error?f.message:"Unknown error")}finally{c(!1)}})()},[]);const u=()=>{t&&s&&s(t)};return o?e.jsx(I,{className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-gray-50 to-white border border-gray-200 shadow-sm",children:e.jsxs("div",{className:"p-8 md:p-12",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 bg-blue-50 text-blue-700 px-4 py-2 rounded-full w-fit mb-6",children:[e.jsx(W,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("span",{className:"font-medium leading-none",children:"Today's Pick"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsx("div",{className:"relative aspect-square md:aspect-[4/3]",children:e.jsx(y,{className:"absolute inset-0 rounded-2xl"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{className:"h-8 w-3/4"}),e.jsx(y,{className:"h-6 w-1/2"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(y,{className:"h-6 w-20"}),e.jsx(y,{className:"h-6 w-20"}),e.jsx(y,{className:"h-6 w-20"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{className:"h-4 w-full"}),e.jsx(y,{className:"h-4 w-full"}),e.jsx(y,{className:"h-4 w-3/4"})]}),e.jsx(y,{className:"h-10 w-32 rounded-full"})]})]})]})}):l||!t?e.jsx(I,{className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-gray-50 to-white border border-gray-200 shadow-sm",children:e.jsxs("div",{className:"p-8 md:p-12",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 bg-blue-50 text-blue-700 px-4 py-2 rounded-full w-fit mb-4",children:[e.jsx(W,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("span",{className:"font-medium leading-none",children:"Today's Pick"})]}),e.jsx("p",{className:"text-gray-600",children:"æœ¬æ—¥ã®ãŠã™ã™ã‚ã‚«ã‚¯ãƒ†ãƒ«ã‚’å–å¾—ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚"})]})}):e.jsx(I,{className:"relative overflow-hidden rounded-2xl md:rounded-2xl bg-gradient-to-br from-gray-50 to-white border border-gray-200 shadow-sm hover:shadow-md transition-shadow cursor-pointer",onClick:u,children:e.jsxs("div",{className:"relative flex flex-col md:grid md:grid-cols-2 gap-4 md:gap-8 p-4 md:p-8 lg:p-12",children:[e.jsxs("div",{className:"flex flex-col justify-center space-y-3 md:space-y-6 order-1 md:order-1",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 bg-blue-50 text-blue-700 px-3 py-1.5 md:px-4 md:py-2 rounded-full w-fit text-sm md:text-base",children:[e.jsx(W,{className:"w-4 h-4 md:w-5 md:h-5 flex-shrink-0"}),e.jsx("span",{className:"font-medium leading-none",children:"Today's Pick"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"space-y-1 md:space-y-2 mb-2 md:mb-4",children:[e.jsx("h2",{className:`${(t.name_ja||t.name).length>10?"text-xl md:text-2xl lg:text-3xl":"text-2xl md:text-3xl lg:text-4xl"} font-bold text-gray-900 leading-tight`,children:t.name_ja||t.name}),t.name_ja&&e.jsx("p",{className:`${t.name.length>20?"text-xs md:text-base":"text-sm md:text-lg"} text-gray-500 font-semibold tracking-wider uppercase`,children:t.name})]}),e.jsx("p",{className:"text-sm md:text-base text-gray-600 leading-relaxed line-clamp-2 md:line-clamp-3",children:t.description})]}),e.jsxs("div",{className:"flex items-center gap-2 md:gap-3 flex-wrap",children:[e.jsx(F,{className:`${Ls[t.strength]} px-2 py-1 md:px-4 md:py-2 text-xs md:text-sm`,children:Ps(t.strength)}),e.jsx(F,{variant:"outline",className:"px-2 py-1 md:px-4 md:py-2 text-xs md:text-sm bg-white border-gray-200",children:Is(t.base)}),e.jsx(F,{variant:"outline",className:"px-2 py-1 md:px-4 md:py-2 text-xs md:text-sm bg-white border-gray-200",children:qs(t.technique)})]}),e.jsxs(k,{onClick:i=>{i.stopPropagation(),u()},className:"hidden md:flex group w-full md:w-fit bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white px-4 md:px-6 lg:px-8 py-3 md:py-4 lg:py-6 shadow-lg hover:shadow-xl transition-all duration-300 text-sm md:text-base",children:["ãƒ¬ã‚·ãƒ”ã‚’è¦‹ã‚‹",e.jsx(ie,{className:"ml-2 w-4 h-4 md:w-5 md:h-5"})]})]}),e.jsx("div",{className:"flex items-center justify-center order-2 md:order-2",children:e.jsx("div",{className:"relative group w-full",children:e.jsx("div",{className:"relative aspect-square w-full max-w-sm mx-auto rounded-2xl md:rounded-2xl overflow-hidden shadow-lg",children:e.jsx(K,{src:t.image_url||"",alt:t.name||"No image available",className:"w-full h-full object-cover"})})})}),e.jsxs(k,{onClick:i=>{i.stopPropagation(),u()},className:"md:hidden group w-full bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white px-4 py-3 shadow-lg hover:shadow-xl transition-all duration-300 text-sm rounded-2xl order-3",children:["ãƒ¬ã‚·ãƒ”ã‚’è¦‹ã‚‹",e.jsx(ie,{className:"ml-2 w-4 h-4"})]})]})})}function Is(s){return{gin:"ã‚¸ãƒ³",rum:"ãƒ©ãƒ ",whisky:"ã‚¦ã‚¤ã‚¹ã‚­ãƒ¼",vodka:"ã‚¦ã‚©ãƒƒã‚«",tequila:"ãƒ†ã‚­ãƒ¼ãƒ©",beer:"ãƒ“ãƒ¼ãƒ«",wine:"ãƒ¯ã‚¤ãƒ³"}[s]||s}function Ps(s){return{light:"ãƒ©ã‚¤ãƒˆ",medium:"ãƒŸãƒ‡ã‚£ã‚¢ãƒ ",strong:"ã‚¹ãƒˆãƒ­ãƒ³ã‚°"}[s]||s}function qs(s){return{build:"ãƒ“ãƒ«ãƒ‰",stir:"ã‚¹ãƒ†ã‚¢",shake:"ã‚·ã‚§ã‚¤ã‚¯"}[s]||s}const Os=[{value:"gin",label:"ã‚¸ãƒ³",icon:"ðŸ¸"},{value:"rum",label:"ãƒ©ãƒ ",icon:"ðŸ¹"},{value:"whisky",label:"ã‚¦ã‚¤ã‚¹ã‚­ãƒ¼",icon:"ðŸ¥ƒ"},{value:"vodka",label:"ã‚¦ã‚©ãƒƒã‚«",icon:"ðŸ¸"},{value:"tequila",label:"ãƒ†ã‚­ãƒ¼ãƒ©",icon:"ðŸ‹"},{value:"beer",label:"ãƒ“ãƒ¼ãƒ«",icon:"ðŸº"},{value:"wine",label:"ãƒ¯ã‚¤ãƒ³",icon:"ðŸ·"}];function oe({searchQuery:s,onSearchChange:t,selectedBases:a,onBasesChange:l}){const[r,o]=n.useState(s),c=n.useRef(null),u=n.useId();n.useEffect(()=>{o(s)},[s]);const i=d=>{a.includes(d)?l([]):l([d])},f=d=>{o(d),t(d)},b=()=>{t(r.trim())},x=d=>{d.key==="Enter"&&(d.preventDefault(),b())};return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-700",htmlFor:u,children:"ã‚«ã‚¯ãƒ†ãƒ«åãƒ»ææ–™åã§æ¤œç´¢"}),e.jsxs("div",{className:"flex items-center w-full max-w-md bg-white rounded-2xl shadow-sm border border-gray-200 focus-within:ring-2 focus-within:ring-blue-500 transition",children:[e.jsx(R,{id:u,type:"text",placeholder:"ãƒžãƒ†ã‚£ãƒ¼ãƒ‹ã€ãƒ¢ãƒ’ãƒ¼ãƒˆ",value:r,onChange:d=>f(d.target.value),onKeyDown:x,className:"flex-1 bg-transparent border-none outline-none px-4 text-gray-800 placeholder-gray-400 h-12 rounded-2xl focus-visible:ring-0 focus-visible:ring-offset-0",ref:c}),e.jsx("button",{type:"button",onClick:()=>c.current?.focus(),className:"h-12 w-12 flex items-center justify-center rounded-2xl bg-gradient-to-r from-indigo-500 to-blue-500 text-white shadow-sm hover:from-indigo-600 hover:to-blue-600 active:scale-95 transition","aria-label":"æ¤œç´¢",children:e.jsx(Ne,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-3 text-sm font-medium text-gray-700",children:"ãƒ™ãƒ¼ã‚¹ã§é¸ã¶"}),e.jsx("div",{className:"space-y-2",children:Os.map(d=>{const m=a.includes(d.value);return e.jsx("button",{onClick:()=>i(d.value),className:`w-full p-3.5 rounded-2xl border transition-all ${m?"bg-gradient-to-r from-blue-500 to-purple-600 text-white border-transparent shadow-sm":"bg-white hover:bg-gray-50 border-gray-200 text-gray-900"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl leading-none",children:d.icon}),e.jsx("span",{className:"flex-1 text-left",children:d.label})]})},d.value)})})]})]})}const z=n.forwardRef(({className:s,...t},a)=>e.jsx("textarea",{className:S("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:a,...t}));z.displayName="Textarea";function As({cocktail:s,isOpen:t,onClose:a,onSuccess:l}){const[r,o]=n.useState({name:s.name||"",name_ja:s.name_ja||"",glass:s.glass||"",glass_ja:s.glass_ja||"",description:s.description||"",instructions:s.instructions||"",instructions_ja:s.instructions_ja||"",image_url_override:s.image_url_override||""}),[c,u]=n.useState(!1),[i,f]=n.useState(null);n.useEffect(()=>{t&&(o({name:s.name||"",name_ja:s.name_ja||"",glass:s.glass||"",glass_ja:s.glass_ja||"",description:s.description||"",instructions:s.instructions||"",instructions_ja:s.instructions_ja||"",image_url_override:s.image_url_override||""}),f(null))},[t,s]);const b=async x=>{x.preventDefault(),u(!0),f(null);try{const d={cocktail:{name:r.name,name_ja:r.name_ja,glass:r.glass,glass_ja:r.glass_ja,description:r.description,instructions:r.instructions,instructions_ja:r.instructions_ja,image_url_override:r.image_url_override||void 0}},m=await ns(s.id,d);l(m),a()}catch(d){f(d instanceof Error?d.message:"æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸ")}finally{u(!1)}};return e.jsx(fe,{open:t,onOpenChange:a,children:e.jsxs(je,{className:"sm:max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsx(be,{children:e.jsx(ve,{className:"text-2xl font-bold",children:"ã‚«ã‚¯ãƒ†ãƒ«æƒ…å ±ã‚’ç·¨é›†"})}),e.jsxs("form",{onSubmit:b,className:"space-y-6",children:[i&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:i}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"name",children:"åå‰ï¼ˆè‹±èªžï¼‰"}),e.jsx(R,{id:"name",value:r.name,onChange:x=>o({...r,name:x.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"name_ja",children:"åå‰ï¼ˆæ—¥æœ¬èªžï¼‰"}),e.jsx(R,{id:"name_ja",value:r.name_ja,onChange:x=>o({...r,name_ja:x.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"glass",children:"ã‚°ãƒ©ã‚¹ï¼ˆè‹±èªžï¼‰"}),e.jsx(R,{id:"glass",value:r.glass,onChange:x=>o({...r,glass:x.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"glass_ja",children:"ã‚°ãƒ©ã‚¹ï¼ˆæ—¥æœ¬èªžï¼‰"}),e.jsx(R,{id:"glass_ja",value:r.glass_ja,onChange:x=>o({...r,glass_ja:x.target.value})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"image_url_override",children:"ç”»åƒURLï¼ˆæ‰‹å‹•è¨­å®šï¼‰"}),e.jsx(R,{id:"image_url_override",type:"url",placeholder:"https://example.com/image.jpg",value:r.image_url_override,onChange:x=>o({...r,image_url_override:x.target.value})}),e.jsx("p",{className:"text-sm text-gray-500",children:"ç”»åƒURLã‚’æŒ‡å®šã™ã‚‹ã¨ã€è‡ªå‹•å–å¾—ã—ãŸç”»åƒã‚ˆã‚Šå„ªå…ˆã—ã¦è¡¨ç¤ºã•ã‚Œã¾ã™"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"description",children:"èª¬æ˜Žæ–‡"}),e.jsx(z,{id:"description",rows:3,placeholder:"ã‚«ã‚¯ãƒ†ãƒ«ã®ç‰¹å¾´ã‚„é­…åŠ›ã‚’èª¬æ˜Žã—ã¦ãã ã•ã„",value:r.description,onChange:x=>o({...r,description:x.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"instructions",children:"ä½œã‚Šæ–¹ï¼ˆè‹±èªžï¼‰"}),e.jsx(z,{id:"instructions",rows:4,value:r.instructions,onChange:x=>o({...r,instructions:x.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"instructions_ja",children:"ä½œã‚Šæ–¹ï¼ˆæ—¥æœ¬èªžï¼‰"}),e.jsx(z,{id:"instructions_ja",rows:4,value:r.instructions_ja,onChange:x=>o({...r,instructions_ja:x.target.value})})]}),e.jsxs(rs,{children:[e.jsx(k,{type:"button",variant:"outline",onClick:a,disabled:c,children:"ã‚­ãƒ£ãƒ³ã‚»ãƒ«"}),e.jsx(k,{type:"submit",disabled:c,children:c?"ä¿å­˜ä¸­...":"ä¿å­˜"})]})]})]})})}const J=360,$s=150,zs=({onClose:s})=>{const t=n.useRef(null),a=n.useRef(null),l=n.useRef(null),r=n.useRef(null),o=n.useRef(null),c=n.useRef(0),[u,i]=n.useState(0),[f,b]=n.useState(!1),x=n.useCallback(p=>{if(p<=0)return 0;const j=Math.min(p,J)/J;return(1-Math.pow(1-j,2.2))*J},[]),d=n.useCallback(p=>{if(c.current=p,typeof window>"u"){i(p);return}o.current||(o.current=window.requestAnimationFrame(()=>{i(c.current),o.current=null}))},[]);n.useEffect(()=>()=>{o.current&&typeof window<"u"&&window.cancelAnimationFrame(o.current)},[]);const m=n.useCallback(p=>{t.current&&t.current.scrollTop===0&&(r.current=null,l.current=p.targetTouches[0].clientY,b(!0))},[]),g=n.useCallback(p=>{if(l.current===null)return;const v=p.targetTouches[0].clientY;r.current=v;const j=v-(l.current??0);j>0?(j>6&&p.preventDefault(),d(x(j))):d(0)},[x,d]),h=n.useCallback(()=>{b(!1),l.current=null,r.current=null},[]),N=n.useCallback(()=>{const p=l.current,v=r.current;if(h(),p!==null&&v!==null&&v-p>$s){s(),d(0);return}d(0)},[s,h,d]);return{scrollRef:t,dialogRef:a,translateY:u,isDragging:f,handleTouchStart:m,handleTouchMove:g,handleTouchEnd:N,handleTouchCancel:N}},ee={gin:"ã‚¸ãƒ³",rum:"ãƒ©ãƒ ",whisky:"ã‚¦ã‚¤ã‚¹ã‚­ãƒ¼",vodka:"ã‚¦ã‚©ãƒƒã‚«",tequila:"ãƒ†ã‚­ãƒ¼ãƒ©",beer:"ãƒ“ãƒ¼ãƒ«",wine:"ãƒ¯ã‚¤ãƒ³"},Te={light:"ãƒ©ã‚¤ãƒˆ",medium:"ãƒŸãƒ‡ã‚£ã‚¢ãƒ ",strong:"ã‚¹ãƒˆãƒ­ãƒ³ã‚°"},De={build:"ãƒ“ãƒ«ãƒ‰",stir:"ã‚¹ãƒ†ã‚¢",shake:"ã‚·ã‚§ã‚¤ã‚¯"},Ms={light:"bg-green-100 text-green-800 border-green-200",medium:"bg-yellow-100 text-yellow-800 border-yellow-200",strong:"bg-red-100 text-red-800 border-red-200"},Bs={gin:"ãƒãƒ¼ãƒãƒ«ãªã‚¸ãƒ³ã®é¦™ã‚ŠãŒæ¾„ã‚“ã ä½™éŸ»ã‚’ç”Ÿã¿ã€ã‚·ãƒˆãƒ©ã‚¹ã®æ¸…æ¶¼æ„ŸãŒå¿ƒåœ°ã‚ˆãç¶šãã¾ã™ã€‚",rum:"ãƒˆãƒ­ãƒ”ã‚«ãƒ«ãªãƒ©ãƒ ã®ç”˜ã¿ã¨ã‚¹ãƒ‘ã‚¤ã‚¹ãŒé‡ãªã‚Šã€ã‚„ã‚ã‚‰ã‹ãªå—å›½ã®ç©ºæ°—ã‚’æ„Ÿã˜ã•ã›ã¾ã™ã€‚",whisky:"ç†Ÿæˆã—ãŸã‚¦ã‚¤ã‚¹ã‚­ãƒ¼ã®åŽšã¿ãŒã—ã£ã¨ã‚ŠåºƒãŒã‚Šã€æ¨½é¦™ãŒç©ã‚„ã‹ãªä½™è£•ã‚’ä¸Žãˆã¾ã™ã€‚",vodka:"ãƒ”ãƒ¥ã‚¢ãªã‚¦ã‚©ãƒƒã‚«ã®é€æ˜Žæ„ŸãŒç´ æã®å‘³ã‚’å¼•ãç«‹ã¦ã€ã™ã£ãã‚Šã¨ã—ãŸå¾Œå‘³ã«ä»•ä¸ŠãŒã‚Šã¾ã™ã€‚",tequila:"ã‚¢ã‚¬ãƒ™ç”±æ¥ã®åŠ›å¼·ã„é¦™ã‚Šã«ãƒ©ã‚¤ãƒ ã®çˆ½å¿«ã•ãŒé‡ãªã‚Šã€é™½æ°—ã§é®®çƒˆãªå°è±¡ã‚’æ®‹ã—ã¾ã™ã€‚",beer:"éº¦èŠ½ã®æ—¨å‘³ã¨è»½ã‚„ã‹ãªæ³¡ãŒåŒæ™‚ã«åºƒãŒã‚Šã€é£Ÿäº‹ã¨ã‚‚åˆã‚ã›ã‚„ã™ã„æŸ”ã‚‰ã‹ã•ãŒã‚ã‚Šã¾ã™ã€‚",wine:"æžœå®Ÿå‘³è±Šã‹ãªãƒ¯ã‚¤ãƒ³ã®ã‚¢ãƒ­ãƒžãŒãµãã‚‰ã¿ã€é…¸å‘³ã¨æ¸‹ã¿ã®ãƒãƒ©ãƒ³ã‚¹ãŒä¸Šå“ã«æ•´ã„ã¾ã™ã€‚"},Hs={light:"è»½ã‚„ã‹ãªé£²ã¿å£ã§æœ€åˆã®ä¸€æ¯ã«ã‚‚é¸ã³ã‚„ã™ãã€ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ã—ãŸã„æ™‚ã«ã´ã£ãŸã‚Šã§ã™ã€‚",medium:"ç”˜å‘³ã¨ã‚¢ãƒ«ã‚³ãƒ¼ãƒ«ã®è¼ªéƒ­ãŒã¡ã‚‡ã†ã©è‰¯ãã€ã‚†ã£ãã‚Šå‘³ãŒã»ã©ã‘ã¦ã„ãã¾ã™ã€‚",strong:"ã—ã£ã‹ã‚Šã¨ã—ãŸã‚¢ãƒ«ã‚³ãƒ¼ãƒ«ã®åŽšã¿ãŒã‚ã‚Šã€è½ã¡ç€ã„ãŸå¤œã«å¯„ã‚Šæ·»ã†å­˜åœ¨æ„ŸãŒã‚ã‚Šã¾ã™ã€‚"},Gs={build:"ã‚°ãƒ©ã‚¹ã®ä¸­ã§ææ–™ã‚’é‡ã­ã‚‹ã“ã¨ã§ã€é¦™ã‚ŠãŒç©ã‚„ã‹ã«ç«‹ã¡ä¸ŠãŒã‚Šç´ æã®è¼ªéƒ­ã‚’æ„Ÿã˜ã‚‰ã‚Œã¾ã™ã€‚",stir:"æ°·ã§ã—ã£ã‹ã‚Šã‚¹ãƒ†ã‚¢ã™ã‚‹ã“ã¨ã§ã€é€æ˜Žæ„Ÿã®ã‚ã‚‹å£å½“ãŸã‚Šã¨æ¾„ã‚“ã å‘³ã‚ã„ã«ä»•ä¸ŠãŒã‚Šã¾ã™ã€‚",shake:"ã‚·ã‚§ã‚¤ã‚«ãƒ¼ã«ç©ºæ°—ã‚’å«ã¾ã›ãªãŒã‚‰æŒ¯ã‚‹ã“ã¨ã§ã€ãµãã‚ˆã‹ã§å†·ãŸã„ä¸€ä½“æ„ŸãŒç”Ÿã¾ã‚Œã¾ã™ã€‚"},Y=s=>{const t=s?.trim();return t?.length?t:null},Us=s=>{if(!s)return null;const t=Bs[s.base]??"ç´ æã®æŒã¤é¦™ã‚Šã‚’ç´ ç›´ã«å¼•ãå‡ºã—ã€å£ã„ã£ã±ã„ã«å„ªé›…ãªä½™éŸ»ãŒåºƒãŒã‚Šã¾ã™ã€‚",a=Hs[s.strength]??"é£²ã¿é€²ã‚ã‚‹ã»ã©ã«èª¿å’ŒãŒå¢—ã—ã€ä½™ç™½ã®ã‚ã‚‹å‘³ã‚ã„ã«ãªã‚Šã¾ã™ã€‚",l=Gs[s.technique]??"ä¸å¯§ãªä»•ä¸Šã’ã«ã‚ˆã£ã¦ã€é¦™ã‚Šã¨æ¸©åº¦ãŒæœ€é©ãªãƒãƒ©ãƒ³ã‚¹ã«æ•´ã„ã¾ã™ã€‚";return[t,a,l,"é™ã‹ãªæ™‚é–“ã«ã‚‚ã€ç‰¹åˆ¥ãªã²ã¨ã¨ãã‚’æ¼”å‡ºã—ãŸã„æ™‚ã«ã‚‚å¯„ã‚Šæ·»ã£ã¦ãã‚Œã‚‹ä¸€æ¯ã§ã™ã€‚"].join(" ")},Vs=s=>{if(!s)return"";const t=s.glass_ja||s.glass||"ã‚°ãƒ©ã‚¹",a=ee[s.base]||"ã‚¹ãƒ”ãƒªãƒƒãƒ„";return`${(()=>{switch(s.technique){case"stir":return`ãƒŸã‚­ã‚·ãƒ³ã‚°ã‚°ãƒ©ã‚¹ã«æ°·ã‚’å…¥ã‚Œã€${a}ã¨ç”˜å‘³ã€ãƒ“ã‚¿ãƒ¼ã‚ºã‚’åŠ ãˆã¦é™ã‹ã«ã‚¹ãƒ†ã‚¢ã—é¦™ã‚Šã¨æ¸©åº¦ã‚’æ•´ãˆã¾ã™ã€‚`;case"shake":return`ã‚·ã‚§ã‚¤ã‚«ãƒ¼ã«${a}ã¨æžœæ±ã€ã‚·ãƒ­ãƒƒãƒ—ã‚’å…¥ã‚Œã¦ã—ã£ã‹ã‚Šå†·ãˆã‚‹ã¾ã§æŒ¯ã‚Šã€ç©ºæ°—ã‚’å«ã¾ã›ã¦æ»‘ã‚‰ã‹ã«ä»•ä¸Šã’ã¾ã™ã€‚`;default:return`${t}ã«æ°·ã‚’æº€ãŸã—ã€${a}ã¨å‰¯ææ–™ã‚’é †ã«æ³¨ã„ã§è»½ãã‚¹ãƒ†ã‚¢ã—ãªãŒã‚‰å…¨ä½“ã‚’é¦´æŸ“ã¾ã›ã¾ã™ã€‚`}})()} é¦™ã‚ŠãŒã¾ã¨ã¾ã£ãŸã‚‰${t}ã«æ³¨ãŽã€ãŠå¥½ã¿ã§æŸ‘æ©˜ã®ãƒ”ãƒ¼ãƒ«ã‚„ãƒãƒ¼ãƒ–ã‚’é£¾ã£ã¦å®Œæˆã§ã™ã€‚`};function Ws({cocktail:s,noteText:t,primaryName:a,secondaryName:l,isFavorite:r,isAdmin:o,onClose:c,onEditClick:u,onToggleFavorite:i}){return e.jsx(be,{className:"bg-white z-10 px-2 sm:px-5 md:px-8 py-3 sm:py-5 border-b border-gray-100 text-left",children:e.jsxs("div",{className:"relative w-full",children:[e.jsx("div",{className:"flex flex-col gap-4 lg:flex-row lg:justify-between pr-2 sm:pr-4 lg:pr-12",children:e.jsxs("div",{className:"space-y-2.5 sm:space-y-3",children:[l&&e.jsx("p",{className:"pl-px text-sm uppercase tracking-[0.3em] text-gray-400 font-semibold",children:l}),e.jsx(ve,{className:"text-2xl sm:text-3xl lg:text-[34px] font-semibold text-gray-900 leading-snug",children:a}),t&&e.jsx("p",{className:"text-sm sm:text-base lg:text-base text-gray-600 leading-relaxed whitespace-pre-wrap",children:t}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2.5 pt-1",children:[e.jsx(F,{className:`${Ms[s.strength]??""} px-3.5 py-1 text-[13px] sm:text-sm rounded-full tracking-tight border`,children:Te[s.strength]}),e.jsxs(F,{variant:"outline",className:"flex items-center gap-1.5 px-3.5 py-1 text-[13px] sm:text-sm rounded-full font-medium border-gray-200 bg-white shadow-sm",children:[e.jsx(Z,{className:"w-3.5 h-3.5"}),ee[s.base]]}),e.jsxs(F,{variant:"outline",className:"flex items-center gap-1.5 px-3.5 py-1 text-[13px] sm:text-sm rounded-full font-medium border-gray-200 bg-white shadow-sm",children:[e.jsx(Se,{className:"w-3.5 h-3.5"}),De[s.technique]]})]})]})}),e.jsxs("div",{className:"absolute top-1.5 sm:top-2 right-0 flex gap-1.5 sm:gap-2",children:[o&&e.jsx(k,{variant:"outline",size:"icon",onClick:u,className:"h-9 w-9 sm:h-10 sm:w-10 rounded-full border-gray-200 text-gray-600 hover:bg-gray-50",children:e.jsx(gs,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),i&&e.jsx(k,{variant:"ghost",size:"icon",onClick:()=>i(s.id),className:"h-9 w-9 sm:h-10 sm:w-10 rounded-full text-gray-400 hover:text-red-500",children:e.jsx(M,{className:`w-5 h-5 sm:w-6 sm:h-6 transition-colors ${r?"fill-red-500 text-red-500":""}`})}),e.jsx(k,{variant:"ghost",size:"icon",onClick:c,className:"h-9 w-9 sm:h-10 sm:w-10 rounded-full text-gray-500 hover:bg-gray-50",children:e.jsx(ye,{className:"w-5 h-5 sm:w-6 sm:h-6"})})]})]})})}function Qs({cocktail:s,className:t}){return e.jsxs("div",{className:S("lg:w-1/2 flex flex-col space-y-5 px-2 sm:px-5 md:px-8 py-4 bg-white lg:sticky lg:top-0 lg:max-h-[calc(100dvh-12rem)]",t),children:[e.jsx("div",{className:"relative w-full aspect-[4/3] sm:aspect-[5/4] lg:aspect-[3/2] rounded-2xl overflow-hidden border border-gray-100 shadow-[0_15px_35px_rgba(15,23,42,0.12)]",children:e.jsx(K,{src:s.image_url||"",alt:s.name,className:"object-cover w-full h-full"})}),e.jsx("div",{className:"grid grid-cols-2 gap-3.5",children:[{icon:e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx(Z,{className:"w-5 h-5 text-blue-600"})}),label:"ãƒ™ãƒ¼ã‚¹",value:ee[s.base]},{icon:e.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-100 flex items-center justify-center",children:e.jsx(Se,{className:"w-5 h-5 text-orange-600"})}),label:"æŠ€æ³•",value:De[s.technique]},{icon:e.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-100 flex items-center justify-center",children:e.jsx(ps,{className:"w-5 h-5 text-indigo-600"})}),label:"ã‚°ãƒ©ã‚¹",value:s.glass_ja||s.glass},{icon:e.jsx("div",{className:"w-10 h-10 rounded-full bg-rose-100 flex items-center justify-center",children:e.jsx(fs,{className:"w-5 h-5 text-rose-600"})}),label:"ã‚¢ãƒ«ã‚³ãƒ¼ãƒ«åº¦æ•°",value:Te[s.strength]}].map(a=>e.jsxs("div",{className:"flex items-center gap-3 p-4 rounded-2xl bg-white border border-gray-100 shadow-sm hover:shadow-md transition-all",children:[a.icon,e.jsxs("div",{children:[e.jsx("p",{className:"text-[11px] uppercase tracking-wide text-gray-500",children:a.label}),e.jsx("p",{className:"text-sm text-gray-900 font-medium",children:a.value})]})]},a.label))})]})}function Js({cocktail:s,instructionsText:t,className:a}){return e.jsx("div",{className:S("flex-1 overflow-y-visible lg:overflow-y-auto px-2 sm:px-5 md:px-8 lg:px-4 py-4 sm:py-6 lg:pt-4 lg:pb-6 mb-5 lg:max-h-[calc(100dvh-12rem)]",a),children:e.jsxs("div",{className:"space-y-6 sm:space-y-7",children:[e.jsxs("div",{className:"rounded-2xl border border-gray-100 bg-white px-4 py-4 sm:px-5 sm:py-5 shadow-[0_10px_30px_rgba(15,23,42,0.05)] hover:shadow-md transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-5 sm:h-6 bg-blue-500 rounded-full"}),e.jsx("h3",{className:"text-base font-semibold text-gray-900",children:"ææ–™"})]}),e.jsx("p",{className:"text-[10px] uppercase tracking-[0.5em] text-gray-300",children:"INGREDIENTS"})]}),e.jsx("div",{className:"mt-4 divide-y divide-gray-100",children:s.ingredients?.map((l,r)=>e.jsxs("div",{className:"flex items-center justify-between py-3 first:pt-0 last:pb-0",children:[e.jsx("span",{className:"text-sm text-gray-900 leading-relaxed",children:l.name}),e.jsx("span",{className:"text-sm text-gray-600 tabular-nums min-w-[72px] text-right",children:l.amount})]},`${l.name}-${r}`))})]}),e.jsxs("div",{className:"rounded-2xl border border-gray-100 bg-white px-4 py-4 sm:px-5 sm:py-5 shadow-[0_10px_30px_rgba(15,23,42,0.05)] hover:shadow-md transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-5 sm:h-6 bg-blue-500 rounded-full"}),e.jsx("h3",{className:"text-base font-semibold text-gray-900",children:"ä½œã‚Šæ–¹"})]}),e.jsx("p",{className:"text-[10px] uppercase tracking-[0.5em] text-gray-300",children:"RECIPE"})]}),e.jsx("p",{className:"mt-3 text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:t})]})]})})}function Ys({cocktail:s,isOpen:t,onClose:a,isFavorite:l,onToggleFavorite:r,onUpdate:o}){const[c,u]=n.useState(!1),[i,f]=n.useState(s),{isAdmin:b}=we(),{scrollRef:x,dialogRef:d,translateY:m,isDragging:g,handleTouchStart:h,handleTouchMove:N,handleTouchEnd:p,handleTouchCancel:v}=zs({onClose:a});n.useEffect(()=>{f(s)},[s]);const j=T=>{f(T),o?.(T)},{primaryName:E,secondaryName:_}=n.useMemo(()=>{const T=i?.name_ja||i?.name||"",A=i?.name&&i?.name!==T?i.name:null;return{primaryName:T,secondaryName:A}},[i]),C=n.useMemo(()=>Y(i?.description)??Us(i),[i]),P=n.useMemo(()=>Y(i?.instructions_ja)??Y(i?.instructions)??Vs(i),[i]);return e.jsxs(e.Fragment,{children:[e.jsx(fe,{open:t,onOpenChange:a,children:e.jsx(je,{ref:d,size:"full",className:" w-[92vw] sm:w-[84vw] lg:w-[74vw] xl:w-[68vw] 2xl:w-[62vw] max-w-[1400px] max-h-[calc(100dvh-6rem)] flex flex-col p-2 sm:p-4 border border-slate-200 rounded-2xl shadow-[0_20px_60px_rgba(15,23,42,0.12)] bg-white overflow-hidden [&>button]:hidden",style:{transform:`translate(-50%, calc(-50% + ${m}px))`,transition:g?"none":"transform 0.35s cubic-bezier(0.22, 1, 0.36, 1), opacity 0.25s ease-out",opacity:g?.98:1,willChange:"transform, opacity"},children:i?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"sm:hidden flex justify-center pt-2 pb-1 shrink-0",children:e.jsx("div",{className:"w-10 h-1 bg-gray-300 rounded-full"})}),e.jsx(Ws,{cocktail:i,noteText:C,primaryName:E,secondaryName:_,isFavorite:l,isAdmin:b,onClose:a,onEditClick:()=>u(!0),onToggleFavorite:r}),e.jsxs("div",{ref:x,className:"flex-1 flex flex-col lg:flex-row bg-white overflow-y-auto lg:overflow-hidden",onTouchStart:h,onTouchMove:N,onTouchEnd:p,onTouchCancel:v,children:[e.jsx(Qs,{cocktail:i}),e.jsx(Js,{cocktail:i,instructionsText:P})]})]}):e.jsxs("div",{className:"p-2 sm:p-6 md:p-8 space-y-6",children:[e.jsx(y,{className:"h-8 sm:h-10 w-3/4 rounded-2xl"}),e.jsx(y,{className:"h-5 sm:h-6 w-1/2 rounded-2xl"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(y,{className:"h-6 sm:h-8 w-16 sm:w-20 rounded-full"}),e.jsx(y,{className:"h-6 sm:h-8 w-16 sm:w-20 rounded-full"})]}),e.jsx(y,{className:"aspect-[16/9] w-full rounded-2xl"})]})})}),b&&i&&e.jsx(As,{cocktail:i,isOpen:c,onClose:()=>u(!1),onSuccess:j})]})}function Ks({value:s,onChange:t}){const[a,l]=n.useState(!1),r=n.useRef(null);n.useEffect(()=>{if(!a)return;const c=i=>{r.current&&!r.current.contains(i.target)&&l(!1)},u=i=>{i.key==="Escape"&&l(!1)};return document.addEventListener("mousedown",c),document.addEventListener("keydown",u),()=>{document.removeEventListener("mousedown",c),document.removeEventListener("keydown",u)}},[a]);const o=c=>{t(c),l(!1)};return e.jsxs("div",{className:"relative",ref:r,children:[e.jsxs(k,{type:"button",variant:"outline",className:"h-9 bg-white border-gray-200 hover:bg-gray-50",onClick:()=>l(c=>!c),"aria-haspopup":"menu","aria-expanded":a,children:["ä¸¦ã¹æ›¿ãˆ",e.jsx(js,{className:"h-4 w-4"})]}),a&&e.jsx("div",{className:"absolute right-0 mt-2 w-40 rounded-2xl border border-gray-200 bg-white shadow-lg z-50",children:e.jsxs("div",{className:"py-2",children:[e.jsx(ce,{active:s==="id",label:"ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ",onSelect:()=>o("id")}),e.jsx(ce,{active:s==="popular",label:"äººæ°—é †",onSelect:()=>o("popular")})]})})]})}function ce({active:s,label:t,onSelect:a}){return e.jsxs("button",{type:"button",className:`flex w-full items-center justify-between px-3 py-2 text-sm transition ${s?"bg-gray-100 text-gray-900":"text-gray-600 hover:bg-gray-50"}`,onClick:a,children:[e.jsx("span",{children:t}),s&&e.jsx(bs,{className:"h-4 w-4"})]})}const Xs=({isFavorited:s,onToggle:t,disabled:a=!1,size:l="md",className:r})=>{const o={sm:"w-6 h-6",md:"w-8 h-8",lg:"w-10 h-10"},c={sm:16,md:20,lg:24};return e.jsx("button",{onClick:u=>{u.stopPropagation(),t()},disabled:a,className:S("rounded-full bg-white/90 backdrop-blur-sm shadow-md","flex items-center justify-center","transition-all duration-200","hover:scale-110 hover:shadow-lg","active:scale-95","disabled:opacity-50 disabled:cursor-not-allowed",o[l],r),"aria-label":s?"ãŠæ°—ã«å…¥ã‚Šã‹ã‚‰å‰Šé™¤":"ãŠæ°—ã«å…¥ã‚Šã«è¿½åŠ ",children:e.jsx(M,{size:c[l],className:S("transition-all duration-200",s?"fill-red-500 text-red-500":"text-gray-400 hover:text-red-400")})})},de={light:"bg-green-100 text-green-800 border-green-200",medium:"bg-yellow-100 text-yellow-800 border-yellow-200",strong:"bg-red-100 text-red-800 border-red-200"},me={light:"ãƒ©ã‚¤ãƒˆ",medium:"ãƒŸãƒ‡ã‚£ã‚¢ãƒ ",strong:"ã‚¹ãƒˆãƒ­ãƒ³ã‚°"},Zs={gin:"ã‚¸ãƒ³",rum:"ãƒ©ãƒ ",whisky:"ã‚¦ã‚¤ã‚¹ã‚­ãƒ¼",vodka:"ã‚¦ã‚©ãƒƒã‚«",tequila:"ãƒ†ã‚­ãƒ¼ãƒ©",beer:"ãƒ“ãƒ¼ãƒ«",wine:"ãƒ¯ã‚¤ãƒ³"},et={build:"ãƒ“ãƒ«ãƒ‰",stir:"ã‚¹ãƒ†ã‚¢",shake:"ã‚·ã‚§ã‚¤ã‚¯"};function Fe({cocktail:s,onViewDetails:t,onFavoriteToggle:a,isFavorited:l=!1,showFavoriteButton:r=!1}){return e.jsxs(I,{className:"group cursor-pointer hover:shadow-lg hover:-translate-y-1 transition-all duration-300 overflow-hidden border bg-white border-gray-200 rounded-2xl",onClick:()=>t(s),children:[e.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden",children:[e.jsx(K,{src:s.image_url||"",alt:s.name,className:"object-cover w-full h-full group-hover:scale-105 transition-transform duration-500"}),r&&a&&e.jsx("div",{className:"absolute top-2 left-2 md:top-3 md:left-3 z-10",children:e.jsx(Xs,{isFavorited:l,onToggle:()=>a(s.id),size:"sm"})}),e.jsx("div",{className:"absolute top-2 right-2 md:top-3 md:right-3",children:e.jsx(F,{className:`${de[s.strength]??de.light} shadow-sm text-xs`,children:me[s.strength]??me.light})})]}),e.jsxs(X,{className:"p-3 md:p-5",children:[e.jsxs("div",{className:"mb-2 md:mb-3 min-h-[2.5rem] md:min-h-[3rem]",children:[e.jsx("h3",{className:"text-sm md:text-base text-gray-900 font-bold line-clamp-1 leading-tight",children:s.name_ja||s.name}),s.name_ja&&e.jsx("p",{className:"text-xs text-gray-500 font-medium tracking-wide uppercase mt-0.5",children:s.name})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs md:text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2 text-gray-600",children:[e.jsx(Z,{className:"w-3.5 h-3.5 md:w-4 md:h-4"}),e.jsx("span",{children:Zs[s.base]})]}),e.jsx("span",{className:"text-gray-500",children:et[s.technique]??s.technique})]})]})]})}const Le=({className:s,...t})=>e.jsx("nav",{role:"navigation","aria-label":"pagination",className:S("mx-auto flex w-full justify-center",s),...t});Le.displayName="Pagination";const Re=n.forwardRef(({className:s,...t},a)=>e.jsx("ul",{ref:a,className:S("flex flex-row items-center gap-1",s),...t}));Re.displayName="PaginationContent";const O=n.forwardRef(({className:s,...t},a)=>e.jsx("li",{ref:a,className:S("",s),...t}));O.displayName="PaginationItem";const B=({className:s,isActive:t,size:a="icon",...l})=>e.jsx("a",{"aria-current":t?"page":void 0,className:S(ls({variant:t?"outline":"ghost",size:a}),s),...l});B.displayName="PaginationLink";const Ie=({className:s,...t})=>e.jsxs(B,{"aria-label":"Go to previous page",size:"default",className:S("gap-1 pl-2.5",s),...t,children:[e.jsx(vs,{className:"h-4 w-4"}),e.jsx("span",{children:"Previous"})]});Ie.displayName="PaginationPrevious";const Pe=({className:s,...t})=>e.jsxs(B,{"aria-label":"Go to next page",size:"default",className:S("gap-1 pr-2.5",s),...t,children:[e.jsx("span",{children:"Next"}),e.jsx(ys,{className:"h-4 w-4"})]});Pe.displayName="PaginationNext";const qe=({className:s,...t})=>e.jsxs("span",{"aria-hidden":!0,className:S("flex h-9 w-9 items-center justify-center",s),...t,children:[e.jsx(ws,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"More pages"})]});qe.displayName="PaginationEllipsis";function Oe({currentPage:s,totalPages:t,onPageChange:a}){if(t<=1)return null;const l=()=>{const r=[];if(t<=5)for(let c=1;c<=t;c++)r.push(c);else{r.push(1),s>3&&r.push("ellipsis");const c=Math.max(2,s-1),u=Math.min(t-1,s+1);for(let i=c;i<=u;i++)r.push(i);s<t-2&&r.push("ellipsis"),r.push(t)}return r};return e.jsx(Le,{children:e.jsxs(Re,{children:[e.jsx(O,{children:e.jsx(Ie,{href:"#",onClick:r=>{r.preventDefault(),s>1&&a(s-1)},className:s===1?"pointer-events-none opacity-50":"cursor-pointer"})}),l().map((r,o)=>r==="ellipsis"?e.jsx(O,{children:e.jsx(qe,{})},`ellipsis-${o}`):e.jsx(O,{children:e.jsx(B,{href:"#",onClick:c=>{c.preventDefault(),a(r)},isActive:s===r,className:"cursor-pointer",children:r})},r)),e.jsx(O,{children:e.jsx(Pe,{href:"#",onClick:r=>{r.preventDefault(),s<t&&a(s+1)},className:s===t?"pointer-events-none opacity-50":"cursor-pointer"})})]})})}function st({cocktails:s,totalCount:t,isLoading:a,error:l,itemsPerPage:r,sortMenu:o,onCardClick:c,onFavoriteToggle:u,isFavorite:i,currentPage:f,totalPages:b,onPageChange:x}){const d=Array.isArray(s),m=d&&s.length===0&&!a;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:[t,"ç¨®é¡žã®ã‚«ã‚¯ãƒ†ãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸ"]}),o]}),l&&!a&&e.jsxs("p",{className:"text-sm text-red-500",children:["Failed to load: ",l]}),a&&!d&&e.jsx("div",{className:"grid gap-3 md:gap-6 grid-cols-2 lg:grid-cols-3",children:Array.from({length:r}).map((g,h)=>e.jsxs(I,{className:"overflow-hidden border bg-white border-gray-200 rounded-2xl",children:[e.jsx("div",{className:"relative aspect-[4/3]",children:e.jsx(y,{className:"absolute inset-0"})}),e.jsxs(X,{className:"p-3 md:p-5",children:[e.jsxs("div",{className:"mb-2 md:mb-3 space-y-2",children:[e.jsx(y,{className:"h-6 w-3/4"}),e.jsx(y,{className:"h-4 w-1/2"})]}),e.jsxs("div",{className:"flex flex-wrap gap-1.5 md:gap-2",children:[e.jsx(y,{className:"h-5 w-16"}),e.jsx(y,{className:"h-5 w-16"})]})]})]},`cocktail-skeleton-${h}`))}),d&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"grid gap-3 md:gap-6 grid-cols-2 lg:grid-cols-3",children:s.map(g=>e.jsx(Fe,{cocktail:g,onViewDetails:c,onFavoriteToggle:u,isFavorited:i(g.id),showFavoriteButton:!0},g.id))}),m&&e.jsx("div",{className:"text-center py-12 text-gray-500",children:e.jsx("p",{children:"æ¡ä»¶ã«ä¸€è‡´ã™ã‚‹ã‚«ã‚¯ãƒ†ãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ"})}),!m&&b>1&&e.jsx(Oe,{currentPage:f,totalPages:b,onPageChange:x})]})]})}function tt({isAuthenticated:s,favorites:t,paginatedFavorites:a,currentPage:l,totalPages:r,onPageChange:o,onRequireLogin:c,onCardClick:u,onFavoriteToggle:i}){return s?t.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(M,{size:48,className:"mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-lg font-medium",children:"ãŠæ°—ã«å…¥ã‚ŠãŒã‚ã‚Šã¾ã›ã‚“"}),e.jsx("p",{className:"text-sm mt-2",children:"ã‚«ã‚¯ãƒ†ãƒ«ã®ãƒãƒ¼ãƒˆãƒžãƒ¼ã‚¯ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã€ãŠæ°—ã«å…¥ã‚Šã«è¿½åŠ ã—ã¾ã—ã‚‡ã†"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid gap-3 md:gap-6 grid-cols-2 lg:grid-cols-3",children:a.map(f=>e.jsx(Fe,{cocktail:f,onViewDetails:u,onFavoriteToggle:i,isFavorited:!0,showFavoriteButton:!0},f.id))}),r>1&&e.jsx(Oe,{currentPage:l,totalPages:r,onPageChange:o})]}):e.jsxs("div",{className:"text-center py-16 bg-gray-50 rounded-2xl border-2 border-dashed border-gray-200",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ”’"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"ãƒ­ã‚°ã‚¤ãƒ³ãŒå¿…è¦ã§ã™"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"ãŠæ°—ã«å…¥ã‚Šæ©Ÿèƒ½ã‚’ä½¿ã†ã«ã¯ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ãã ã•ã„"}),e.jsxs(k,{onClick:c,className:"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white shadow-sm",children:[e.jsx(Ns,{className:"w-4 h-4 mr-2"}),"ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹"]})]})}const at=()=>{const[s,t]=n.useState([]),[a,l]=n.useState(!1),[r,o]=n.useState(null),c=n.useCallback(()=>{const m=localStorage.getItem("auth_token");if(!m){const g="ãƒ­ã‚°ã‚¤ãƒ³ãŒå¿…è¦ã§ã™";return o(g),L.error(g),null}return m},[]),u=n.useCallback(async()=>{if(c()){l(!0),o(null);try{const m=await is("/api/v1/favorites");t(Array.isArray(m?.data)?m.data:[])}catch(m){const g=m instanceof Error?m.message:"ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ";o(g),L.error(g)}finally{l(!1)}}},[c]),i=n.useCallback(async m=>{if(!c())return!1;o(null);try{const h=(await os("/api/v1/favorites",{cocktail_id:m}))?.data;if(h?.id&&h?.cocktail){const N=typeof h.created_at=="string"?h.created_at:new Date().toISOString();t(p=>p.find(j=>j.cocktail.id===h.cocktail.id)?p.map(j=>j.cocktail.id===h.cocktail.id?{id:h.id,cocktail:{...h.cocktail,is_favorited:!0},created_at:N}:j):[{id:h.id,cocktail:{...h.cocktail,is_favorited:!0},created_at:N},...p])}else await u();return L.success("ãŠæ°—ã«å…¥ã‚Šã«è¿½åŠ ã—ã¾ã—ãŸ"),!0}catch(g){const h=g instanceof Error?g.message:"ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ";return o(h),L.error(h),!1}},[u,c]),f=n.useCallback(async m=>{if(!c())return!1;o(null);try{return await cs(`/api/v1/favorites/${m}`),t(g=>g.filter(h=>h.id!==m)),L.success("ãŠæ°—ã«å…¥ã‚Šã‹ã‚‰å‰Šé™¤ã—ã¾ã—ãŸ"),!0}catch(g){const h=g instanceof Error?g.message:"ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ";return o(h),L.error(h),!1}},[c]),b=n.useCallback(m=>s.find(h=>h.cocktail.id===m)?.id,[s]),x=n.useCallback(m=>s.some(g=>g.cocktail.id===m),[s]),d=n.useCallback(()=>{t([]),o(null)},[]);return{favorites:s,loading:a,error:r,fetchFavorites:u,addFavorite:i,removeFavorite:f,getFavoriteId:b,isFavorite:x,clearFavorites:d}};function rt(s,t=300){const[a,l]=n.useState(s);return n.useEffect(()=>{const r=setTimeout(()=>l(s),t);return()=>clearTimeout(r)},[s,t]),a}function nt(s){const{query:t,bases:a,page:l,perPage:r,sort:o}=s,[c,u]=n.useState(null),[i,f]=n.useState(0),[b,x]=n.useState(0),[d,m]=n.useState(null),[g,h]=n.useState(!0),N=rt(t,300),p=n.useMemo(()=>`cocktails_${JSON.stringify({q:N,base:a,page:l,per_page:r,sort:o})}`,[N,a,l,r,o]);return n.useEffect(()=>{let v=!0;h(!0);const j=typeof window<"u"&&!!window.sessionStorage,E=C=>{v&&(u(C.cocktails),f(C.meta.total_pages),x(C.meta.total_count),m(null))};if(j){const C=window.sessionStorage.getItem(p);if(C)try{const P=JSON.parse(C);return E(P),h(!1),()=>{v=!1}}catch{window.sessionStorage.removeItem(p)}}const _={page:l,per_page:r};return N&&(_.q=N),a.length&&(_.base=a),o==="popular"&&(_.sort="popular"),ds(_).then(C=>{v&&(E(C),j&&window.sessionStorage.setItem(p,JSON.stringify(C)))}).catch(C=>{v&&m(C instanceof Error?C.message:"Failed to fetch cocktails")}).finally(()=>{v&&h(!1)}),()=>{v=!1}},[a,p,N,l,r,o]),{cocktails:c,totalPages:i,totalCount:b,error:d,isLoading:g,debouncedQuery:N,updateLocalCocktail:v=>{u(j=>j&&j.map(E=>E.id===v.id?v:E))}}}const ue={"@context":"https://schema.org","@type":"WebSite",name:Q.siteName,url:Q.siteUrl,potentialAction:{"@type":"SearchAction",target:`${Q.siteUrl}/?q={search_term_string}`,"query-input":"required name=search_term_string"}},lt=()=>{const[s,t]=n.useState(typeof window<"u"&&window.innerWidth<1024?8:9);return n.useEffect(()=>{const a=()=>{t(window.innerWidth<1024?8:9)};return window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]),s};function ut(){const s=lt(),[t,a]=n.useState(null),[l,r]=n.useState(!1),[o,c]=n.useState("all"),[u,i]=n.useState(!1),[f,b]=n.useState(!1),[x,d]=n.useState(1),[m,g]=n.useState(1),[h,N]=n.useState(""),[p,v]=n.useState([]),[j,E]=n.useState("id"),{user:_,login:C,signup:P}=we(),{favorites:T,fetchFavorites:A,addFavorite:Ae,removeFavorite:$e,getFavoriteId:ze,isFavorite:H,clearFavorites:se}=at(),{cocktails:q,totalPages:Me,totalCount:te,error:Be,isLoading:He,debouncedQuery:Ge,updateLocalCocktail:Ue}=nt({query:h,bases:p,page:x,perPage:s,sort:j});n.useEffect(()=>{d(1)},[Ge,p,j]),n.useEffect(()=>{_?A():se()},[_,A,se]);const G=async w=>{try{const $=await hs(w.id);a($)}catch{a(w)}finally{r(!0)}},Ve=()=>{r(!1),a(null)},U=async w=>{if(!_){i(!0);return}if(H(w)){const re=ze(w);re&&await $e(re)}else await Ae(w)},We=w=>{c(w),w==="all"?d(1):g(1)},Qe=w=>{E(w)},V=T.map(w=>w.cocktail),Je=V.length,Ye=Math.ceil(Je/s)||1,Ke=V.slice((m-1)*s,m*s),ae=q&&q.length?{"@context":"https://schema.org","@type":"ItemList",itemListElement:q.slice(0,Math.min(10,q.length)).map((w,$)=>({"@type":"ListItem",position:$+1,url:Ss(`/cocktails/${w.id}`),name:w.name_ja||w.name}))}:void 0,Xe=ae?[ue,ae]:ue;return e.jsxs(e.Fragment,{children:[e.jsx(Cs,{title:"Today's Cocktail - ä»Šæ—¥ã®ä¸€æ¯ãŒè¦‹ã¤ã‹ã‚‹ã‚«ã‚¯ãƒ†ãƒ«å›³é‘‘",description:"ãƒ™ãƒ¼ã‚¹é…’ã‚„å‘³ã‚ã„ã€äººæ°—é †ã§40ç¨®é¡žä»¥ä¸Šã®ã‚«ã‚¯ãƒ†ãƒ«ã‚’æ¤œç´¢ã€‚ä»Šæ—¥ã®ãŠã™ã™ã‚ã‚„ãŠæ°—ã«å…¥ã‚Šæ©Ÿèƒ½ã§ã€è‡ªåˆ†ã ã‘ã®ä¸€æ¯ã‚’è¦‹ã¤ã‘ã¾ã—ã‚‡ã†ã€‚",path:"/",structuredData:Xe}),e.jsxs("div",{className:"min-h-screen bg-gray-50 text-foreground",children:[e.jsx("div",{className:"max-w-7xl mx-auto p-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[320px_1fr] gap-6",children:[e.jsx("aside",{className:"hidden lg:block lg:sticky lg:top-6 lg:h-fit",children:e.jsx(I,{className:"bg-white border-gray-200",children:e.jsx(X,{className:"pt-6",children:e.jsx(oe,{searchQuery:h,onSearchChange:N,selectedBases:p,onBasesChange:v})})})}),e.jsxs("main",{className:"space-y-6",children:[e.jsx("div",{className:"order-1",children:e.jsx(Rs,{onViewDetails:G})}),e.jsx("section",{className:"space-y-4 order-2",children:e.jsxs(ms,{value:o,onValueChange:We,className:"w-full",children:[e.jsxs(us,{className:"grid w-full max-w-md grid-cols-2",children:[e.jsxs(ne,{value:"all",className:"flex items-center gap-2",children:["ã™ã¹ã¦ (",te||0,")"]}),e.jsxs(ne,{value:"favorites",className:"flex items-center gap-2",children:[e.jsx(M,{size:16,className:_?"fill-red-500 text-red-500":""}),"ãŠæ°—ã«å…¥ã‚Š (",T.length,")"]})]}),e.jsx(le,{value:"all",className:"space-y-4 mt-6",children:e.jsx(st,{cocktails:q,totalCount:te,isLoading:He,error:Be,itemsPerPage:s,sortMenu:e.jsx(Ks,{value:j,onChange:Qe}),onCardClick:G,onFavoriteToggle:U,isFavorite:H,currentPage:x,totalPages:Me,onPageChange:d})}),e.jsx(le,{value:"favorites",className:"space-y-4 mt-6",children:e.jsx(tt,{isAuthenticated:!!_,favorites:V,paginatedFavorites:Ke,currentPage:m,totalPages:Ye,onPageChange:g,onRequireLogin:()=>i(!0),onCardClick:G,onFavoriteToggle:U})})]})})]})]})}),e.jsx(Ys,{cocktail:t,isOpen:l,onClose:Ve,isFavorite:t?H(t.id):!1,onToggleFavorite:U,onUpdate:w=>{Ue(w),a(w)}}),e.jsxs(_s,{open:f,onOpenChange:b,children:[e.jsx(ks,{asChild:!0,children:e.jsx(k,{className:"lg:hidden fixed bottom-32 right-6 w-14 h-14 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white shadow-lg hover:shadow-xl transition-all z-50 p-0",children:e.jsx(Ne,{className:"w-6 h-6"})})}),e.jsxs(_e,{side:"left",className:"w-[320px] sm:w-[380px] overflow-y-auto",children:[e.jsx(ke,{children:e.jsx(Ee,{className:"text-lg font-semibold",children:"æ¤œç´¢ãƒ»çµžã‚Šè¾¼ã¿"})}),e.jsx("div",{className:"mt-6",children:e.jsx(oe,{searchQuery:h,onSearchChange:N,selectedBases:p,onBasesChange:v})})]})]}),e.jsx(xs,{isOpen:u,onClose:()=>i(!1),onLogin:C,onSignup:P})]})]})}export{ut as CocktailList};
//# sourceMappingURL=CocktailList-DfMyNuPR.js.map
