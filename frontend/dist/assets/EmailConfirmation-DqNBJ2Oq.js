import{j as e,B as m}from"./index-Dzd8rIx9.js";import{j as f,i as j,r as o}from"./react-BiOD6Bo6.js";import{S as g}from"./Seo-986Xj8qT.js";import"./ui-CR49N7Ia.js";function v(){const[n]=f(),i=j(),[a,r]=o.useState("loading"),[c,s]=o.useState("");o.useEffect(()=>{const l=n.get("confirmation_token");if(!l){r("error"),s("確認トークンが見つかりません。");return}(async()=>{try{const t=await fetch(`https://todays-cocktails.onrender.com/api/v1/confirmation?confirmation_token=${l}`,{method:"GET",headers:{"Content-Type":"application/json"}}),u=await t.json();if(t.ok){const d=t.headers.get("Authorization");if(d){const h=d.replace("Bearer ","");localStorage.setItem("auth_token",h)}r("success"),s("メールアドレスの認証が完了しました。ホーム画面へリダイレクトします。"),setTimeout(()=>{window.location.href="/"},2e3)}else r("error"),s(u.status?.message||"確認に失敗しました。")}catch(t){r("error"),s("確認中にエラーが発生しました。"),t instanceof Error&&s(t.message)}})()},[n]);const x={"@context":"https://schema.org","@type":"WebPage",name:"メール確認 | Today's Cocktail",description:"ユーザーのメールアドレス確認状態を表示するページ"};return e.jsxs(e.Fragment,{children:[e.jsx(g,{title:"メール確認",description:"メールアドレスの認証が完了するとホーム画面にリダイレクトします。",path:"/confirmation",noindex:!0,structuredData:x}),e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8",children:[a==="loading"&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"確認中..."})]}),a==="success"&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"確認完了"}),e.jsx("p",{className:"text-gray-600 mb-6",children:c}),e.jsx(m,{onClick:()=>i("/"),className:"w-full",children:"ホームへ戻ってログイン"})]}),a==="error"&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"確認失敗"}),e.jsx("p",{className:"text-gray-600 mb-6",children:c}),e.jsx(m,{onClick:()=>i("/"),variant:"outline",className:"w-full",children:"ホームへ戻る"})]})]})})]})}export{v as EmailConfirmation};
//# sourceMappingURL=EmailConfirmation-DqNBJ2Oq.js.map
